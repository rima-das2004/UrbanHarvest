<% layout('layouts/boilerplate') -%>
<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <!-- Left Side -->
            <!-- Left Side -->
            <form action="/updateAccount/<%=_id %>?_method=put" method="post" class="d-flex" style="gap: 20px;" enctype="multipart/form-data">
<div class="col-md-4 mb-4 animate__animated animate__fadeInLeft">
    
    <div class="card profile-card p-4 h-100">
        


        <!-- Profile section with camera -->

        <div class="text-center mb-4">
            <div class="profile-pic-wrapper vector-placeholder">
                <!-- <svg id="profile-pic" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 5C13.66 5 15 6.34 15 8C15 9.66 13.66 11 12 11C10.34 11 9 9.66 9 8C9 6.34 10.34 5 12 5ZM12 19.2C9.5 19.2 7.21 17.92 5.85 15.98C6.01 14.33 8.67 13.2 12 13.2C15.33 13.2 17.99 14.33 18.15 15.98C16.79 17.92 14.5 19.2 12 19.2Z" fill="#666"/>
                </svg> -->
                <img src="<%= image.url %>" id="profile-pic" alt="img">
                <label class="profile-pic-upload" for="upload">
                    <i class="fas fa-camera text-dark"></i>
                    <input type="file" 
                           id="upload" 
                           class="upload-input" 
                           accept=".png,.jpg,.jpeg" 
                           onchange="previewImage(event)" name="image">
                </label>
            </div>
        </div>

        <!-- Edit Button -->
        <div class="d-grid mb-4">
            <button type="submit" class="btn btn-edit animate__animated animate__pulse animate__infinite">
                <i class="fas fa-edit me-2"></i>Update Profile
            </button>
        </div>

        <!-- Profile Section Vector Graphic -->
        <div class="profile-vector text-center mt-auto" style="margin: 0px !important;">
            <img src="https://img.freepik.com/free-vector/user-profile-concept-illustration_114360-2580.jpg" 
                 class="img-fluid profile-vector-illustration" 
                 alt="Profile Section Illustration">
            <div class="vector-caption mt-3">
                <h5 class="text-muted">Personal Profile</h5>
                <p class="text-muted small">Edit your personal details and preferences</p>
            </div>
        </div>
    </div>
</div>

            <!-- Right Side Content -->
            <div class="col-md-7 animate__animated animate__fadeInRight">
                <div class="card profile-card h-100 p-4">
                    <div class="row animate-fade-in">
                        <div class="col-md-12">
                            <h2 class="mb-0"><%= firstname %> <%= lastname %></h2>
                            <p class="text-muted"><%= role %>></p>
                            <hr>
                            
                            <div class="row">
                                <div class="col-md-12">

                                    <h5 class="mb-4">Update Details</h5>
                                    <div class="contact-field">

                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-user contact-icon"></i>
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label" for="user">First name</label>
                                                <input type="user" id="user" class="form-control" name="firstname" value="<%= firstname %>"  required>
                                                <div class="valid-feedback">
                                                  Looks good!
                                                </div>
                                                <div class="invalid-feedback">
                                                Firstname should be valid
                                                </div>
                                              </div>
                                        </div>
                                    
                                    </div>
                                    
                                    <div class="contact-field">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-user contact-icon"></i>
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label" for="lastnamer">Lastname</label>
                                                <input type="lastname" id="lastname" class="form-control" name="lastname" value="<%= lastname%>" >
                                               
                                              </div>
                                        </div>
                                    
                                    </div>
                                    
                                    <div class="contact-field">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-phone contact-icon"></i>
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label" for="phone">Phone:</label>
                                                <input type="phone" id="phone" class="form-control" name="phone" value="<%= phone %>"  required>
                                                <div class="valid-feedback">
                                                  Looks good!
                                                </div>
                                                <div class="invalid-feedback">
                                                  phone number should be valid
                                                </div>
                                              </div>
                                        </div>
                                  
                                    </div>
                                    
                                    <div class="contact-field">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-map-marker-alt contact-icon"></i>
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label" for="address">Address:</label>
                                                <input type="address" id="address" class="form-control" name="address" value="<%= address %>"  required>
                                                <div class="valid-feedback">
                                                  Looks good!
                                                </div>
                                                <div class="invalid-feedback">
                                                  Address should be valid
                                                </div>
                                              </div>
                                        </div>
                                    </div>
                                    <div class="contact-field">
                                        <div class="d-flex align-items-center">
                                            <i class="fas fa-map-marker-alt contact-icon"></i>
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label" for="country">Country</label>
                                                <input type="country" id="country" class="form-control" name="country" value="<%= country %>"  required>
                                                <div class="valid-feedback">
                                                  Looks good!
                                                </div>
                                                <div class="invalid-feedback">
                                                  Country should be valid
                                                </div>
                                              </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
        
                         
                        </div>
                    </div>
                </div>
            </div>
            </form>
            </div>
            


    
    <script>
        
        reader.onload = function() {
            const img = new Image();
            img.src = reader.result;
            
            // Remove vector placeholder
            wrapper.classList.remove('vector-placeholder');
            wrapper.innerHTML = '';
            
            // Create new image element
            const newImg = document.createElement('img');
            newImg.id = 'profile-pic';
            newImg.src = reader.result;
            newImg.classList.add('animate_animated', 'animate_flipInY');
            
            // Create camera button FIRST
            const cameraLabel = document.createElement('label');
            cameraLabel.className = 'profile-pic-upload';
            cameraLabel.htmlFor = 'upload';
            cameraLabel.innerHTML = `
                <i class="fas fa-camera text-dark"></i>
                <input type="file" id="upload" class="upload-input" 
                       accept=".png,.jpg,.jpeg" name="image" onchange="previewImage(event)">
            `;
            
            // Append elements
            wrapper.appendChild(cameraLabel);
            wrapper.appendChild(newImg);
           
            
            setTimeout(() => newImg.classList.remove('animate__flipInY'), 1000);
        };
        
        
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> 
</body>
